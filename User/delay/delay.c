#include "delay.h"
volatile unsigned long time_delay; // ????,?????????
//??n_ms
void delay_ms(volatile unsigned long nms)
{
    //SYSTICK??--1ms???????
    if (SysTick_Config(SystemFrequency/1000))
    {
   
        while (1);
    }
    time_delay=nms;//??????
    while(time_delay);
    SysTick->CTRL=0x00; //?????
    SysTick->VAL =0X00; //?????
}
//??nus
void delay_us(volatile unsigned long nus)
{
 //SYSTICK??--1us???????
    if (SysTick_Config(SystemFrequency/1000000))
    {
   
        while (1);
    }
    time_delay=nus;//??????
    while(time_delay);
    SysTick->CTRL=0x00; //?????
    SysTick->VAL =0X00; //?????
}
 
    //?????time_delay???????
 
void SysTick_Handler(void)
{
    if(time_delay)
        time_delay--;
}